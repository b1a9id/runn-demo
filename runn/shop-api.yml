desc: runnのチュートリアル
runners:
  req: http://localhost:8080/api

steps:
  listShops:
    desc: "加盟店の一覧を取得"
    include: list-shops.yml
  getFirstShop:
    desc: "1番目の加盟店の詳細を取得"
    req:
      /shops/{{ steps.listShops.shops[0].id }}:
        get:
          body:
            application/json: null
    test: |
      # ステータスコードが200であること
      current.res.status == 200
      # 正しい加盟店IDで取得できること
      && steps.getFirstShop.res.body.id == steps.listShops.shops[0].id
  getSecondShop:
    desc: "2番目の加盟店の詳細を取得"
    req:
      /shops/{{ steps.listShops.shops[1].id }}:
        get:
          body:
            application/json: null
    test: |
      # ステータスコードが200であること
      current.res.status == 200
      # 正しい加盟店IDで取得できること
      && steps.getSecondShop.res.body.id == steps.listShops.shops[1].id
